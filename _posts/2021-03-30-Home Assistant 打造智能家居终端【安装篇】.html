---
layout: post
status: publish
published: true
title: 'Home Assistant 打造智能家居终端【安装篇】'
excerpt: '树莓派 + Docker + Home Assistant，打造智能家居平台'
author:
  display_name: huahuoding
  login: huahuoding
  email: dinghuahuo@gmail.com
  url: ''
featured-image: 'https://cloud.huahuoding.com/images/2021/03/30/202103305pDQfO.jpeg'
featured-image-alt: 'Home Assistant 打造智能家居终端【安装篇】'
wx_url: 'http://mp.weixin.qq.com/s?__biz=MzIyMjEzMjMwMg==&mid=2650025302&idx=1&sn=9d73e2073785ac0190e48f94c746bb9b&chksm=f032ac77c74525613769cc21afa288a4dd1d9c9368321aa27da451e6fd8e8c2a36be35d9d5fe#rd'
date: '2021-03-30 18:26:55 +0800'
date_gmt: '2021-03-30 18:26:55 +0800'
categories:
- 花火田丁
tags: []
comments: []
---

<div class="rich_media_wrp" id="img-content">
<h1 class="rich_media_title" id="activity-name">
                    
                    
                    
Home Assistant 打造智能家居终端【安装篇】
                </h1>
<div class="rich_media_meta_list" id="meta_content">
<span class="wx_tap_link js_wx_tap_highlight rich_media_meta icon_appmsg_tag appmsg_title_tag weui-wa-hotarea" id="copyright_logo">原创</span>
<span class="rich_media_meta rich_media_meta_text">
<span class="wx_tap_link js_wx_tap_highlight rich_media_meta_link weui-wa-hotarea" datacanreward="0" datarewardsn="" datatimestamp="" id="js_author_name" role="link">花火田丁</span>
</span>
<span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
<a class="wx_tap_link js_wx_tap_highlight weui-wa-hotarea" href="{{page.wx_url}}" id="js_name">
                        花火田丁                      </a>
<div aria-hidden="true" class="profile_container" id="js_profile_qrcode" style="display:none;">
<div class="profile_inner">
<strong class="profile_nickname">花火田丁</strong>
<img alt="" class="profile_avatar" id="js_profile_qrcode_img" src=""/>
<p class="profile_meta">
<label class="profile_meta_label">微信号</label>
<span class="profile_meta_value">huahuoding</span>
</p>
<p class="profile_meta">
<label class="profile_meta_label">功能介绍</label>
<span class="profile_meta_value">对与错，是与非，下一秒钟你又在哪里？这里有一切关于「relativity」的故事</span>
</p>
</div>
<span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
<i class="profile_arrow arrow_out"></i>
<i class="profile_arrow arrow_in"></i>
</span>
</div>
</span>
<em class="rich_media_meta rich_media_meta_text" id="publish_time">{{page.date}}</em>
</div>

<div class="rich_media_content" id="js_content" style="visibility: visible;">
<section style="white-space: normal;"><section powered-by="xiumi.us"><section><section><section><section powered-by="xiumi.us"><section><section><section><qqmusic albumid="000IAmFF4Up8xn" albumurl="https://y.gtimg.cn/music/photo_new/T002R68x68M000000IAmFF4Up8xn.jpg" audiourl="http://isure6.stream.qqmusic.qq.com/C2000048ibAc2dk1CL.m4a?guid=2000001731&amp;vkey=BC72511DAB27A25AAC8B65B9133DC38DA5D03F370B7E220FD3762A1915C6E3D5E2325DC8D9D906CA1C715A3EDFAF4CD580B28644A597945C&amp;uin=&amp;fromtag=50" class="js_editor_qqmusic qqmusic_iframe js_uneditable custom_select_card" data-pluginname="insertaudio" jumpurlkey="" mid="003CSmyZ2zmtkN" music_name="You Are Not Alone" musicid="4887888" musictype="1" otherid="003CSmyZ2zmtkN" play_length="457" singer="Michael Jackson - Blood On The Dance Floor: HIStory In The Mix" src="/mp/readtemplate?t=app_editor/music&amp;singer=Michael%20Jackson%20-%20Blood%20On%20The%20Dance%20Floor%3A%20HIStory%20In%20The%20Mix&amp;music_name=You%20Are%20Not%20Alone&amp;albumurl=https%3A%2F%2Fy.gtimg.cn%2Fmusic%2Fphoto_new%2FT002R68x68M000000IAmFF4Up8xn.jpg&amp;musictype=1"></qqmusic></section></section></section></section></section></section></section></section></section><section style="font-size: 16px;white-space: normal;max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);background-color: rgb(255, 255, 255);word-wrap: break-word !important;"><section powered-by="xiumi.us" style="max-width: 100%;box-sizing: border-box;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box;word-wrap: break-word !important;"><section><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>最近要在 Docker 上跑个测试项目，于是我又翻出了树莓派来练手。用什么来练呢？当然还是来实现自己的一个需求。<br/></p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>看过我之前文章的朋友们应该知道，Home Assistant（以下简称 HA） 是一个开源的智能家居平台，几乎可以接入市面上所有的智能家居品牌（个别型号不支持），同时还可以实现自动化操作和事件通知。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>如果家里是 Apple 全家桶，那可以直接用 Apple 自带的 HomeKit，而如果需要兼容安卓，可玩性更高一点，HA 就再适合不过了。而且 HA 还可以反向操作，通过 HA 让原本不支持 HomeKit 的设备可以在 HomeKit 中控制。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>总之，很强大就是了。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>我在写 <a data-itemshowtype="0" data-linktype="2" href="http://mp.weixin.qq.com/s?__biz=MzIyMjEzMjMwMg==&amp;mid=2650023072&amp;idx=1&amp;sn=ae006c380678beedcf5c5bf6e9427025&amp;chksm=f032a581c7452c978bc0d237545a46a12544a864f0d0fe69fe70284d658bbbfe833031975f1d&amp;scene=21#wechat_redirect" tab="innerlink" target="_blank" textvalue="正当有用时">正当有用时</a> 这篇文章的时候，其实已经搭好了一个测试用的树莓派 + HA，并且实现了一个简单的控制屏的界面效果。为什么又要开始折腾呢？</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>当初搭的时候，为了省事，直接给树莓派烧录了 HA 官方提供的操作系统 —— HASS，也不需要额外的配置，装完启动即可，适合新手小白。但如今这块树莓派还需要做其他用处，直接用 HASS 系统有些限制，于是我又烧回了 Pi 的原生系统。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>为了不影响 Pi 本身的开发环境，我决定把 HA 装在 Docker 里，本文用来记录<span style='font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(37, 37, 37);'>树莓派 + Docker + Home Assistant</span> 的安装过程，从树莓派原生系统的安装开始，到 HomeAssistant 跑起来，为止。</p><h4 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(76, 193, 252);line-height: 1.4em;background-color: rgb(255, 255, 255);'>环境及准备：</h4><ol class="list-paddingleft-2" style='font-size: 16px;text-align: start;white-space: normal;margin-top: 0.8em;margin-bottom: 0.8em;padding-left: 0.4em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><li style="margin-left: 1em;"><p>树莓派 3B（32位）</p></li><li style="margin-left: 1em;"><p>一张 SD 卡（16GB 以上）</p></li><li style="margin-left: 1em;"><p>烧录软件（以 MacBook 上的 Balena Etcher <span style="color: rgb(61, 170, 214);">下载地址<sup style='white-space: normal;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;text-align: left;'>1</sup><sup style='white-space: normal;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;text-align: left;'> </sup></span>为例）</p></li><li style="margin-left: 1em;"><p>Wi-Fi 或者 有线网络</p></li><li style="margin-left: 1em;"><p>显示器 + HDMI 线 + 鼠标 + 键盘（可选）</p></li></ol><h4 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(76, 193, 252);line-height: 1.4em;background-color: rgb(255, 255, 255);'><br/></h4><h4 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(76, 193, 252);line-height: 1.4em;background-color: rgb(255, 255, 255);'>安装树莓派原生系统</h4><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><span style="color: rgb(61, 170, 214);">树莓派官网<sup style='text-align: start;white-space: normal;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;'>2</sup><sup style='caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;text-align: left;white-space: normal;'></sup></span></p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>树莓派提供两种安装方式：Raspberry Pi Imager 和 手动安装，手动安装即下载操作系统镜像文件+自行烧录到 SD 卡的方式。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>Pi Imager 以前没留意过，不知道是不是这两年新加的，看介绍是只需要在电脑上（支持 Mac，Windows，Ubuntu）下载一个「Pi Imager」的应用程序，然后把 SD 卡插到电脑上，运行应用程序即可。我猜是把下载和烧录的工作在 Imager 里一起实现了，新手可以试试这种方式。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><span style='font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(37, 37, 37);'>以下以手动安装方式为例：</span></p><h5 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(170, 170, 170);font-size: 0.83em;line-height: 1.4em;padding-bottom: 4px;border-bottom-width: 1px;border-bottom-style: solid;border-bottom-color: rgb(240, 240, 240);background-color: rgb(255, 255, 255);'><span style="font-size: 16px;color: rgb(136, 136, 136);">下载操作系统镜像文件：</span></h5><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>还是刚才的网页，往下翻到「Manually install an operating system image」，点击「See all download options」</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.31494661921708184" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZFibnXggBpT7x21KloSgiakxia9xWmIOhyAuyjGR6E2WyjgFpicI2XoAs0Q/640?wx_fmt=png" data-type="png" data-w="2248" src="https://cloud.huahuoding.com/images/2021/03/30/202103306cvor9.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网页截图</span></figcaption></img></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>新手可以选择第一个选项，自带了图形操作界面和必要的软件，熟悉 SSH 操作的可以选择其他选项。</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.6337059329320722" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZjIX4BxCPQhBTGfDNdibrzmKrTkNibzE8b7lcz9oGic35C5b0UocUeibZdQ/640?wx_fmt=png" data-type="png" data-w="2326" src="https://cloud.huahuoding.com/images/2021/03/30/20210330681B99.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网页截图</span></figcaption></figure><h5 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(170, 170, 170);font-size: 0.83em;line-height: 1.4em;padding-bottom: 4px;border-bottom-width: 1px;border-bottom-style: solid;border-bottom-color: rgb(240, 240, 240);background-color: rgb(255, 255, 255);'><span style="font-size: 16px;color: rgb(136, 136, 136);">将镜像文件烧录到 SD 卡</span></h5><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>下载下来是一个 Zip 文件，然后我们插上 SD 卡，打开预先安装好的 Balena Etcher 软件，「Select Image」选到下载的 Zip 文件，「Select Target」选到 SD 卡，点击「Flash」，即开始烧录，等个几分钟。</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.588456712672522" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZQDHkkNqDdFiaPn2kW4UYULYXBMge3Lib6RjCvhMG3rr1OtfRLOflcU0w/640?wx_fmt=png" data-type="png" data-w="1594" src="https://cloud.huahuoding.com/images/2021/03/30/20210330I6363D.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自软件截图</span></figcaption></figure><h5 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(170, 170, 170);font-size: 0.83em;line-height: 1.4em;padding-bottom: 4px;border-bottom-width: 1px;border-bottom-style: solid;border-bottom-color: rgb(240, 240, 240);background-color: rgb(255, 255, 255);'><span style="font-size: 16px;color: rgb(136, 136, 136);">登录树莓派</span></h5><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>将烧录完成的 SD 卡插到树莓派，给树莓派接上网线，有条件的可以用 HDMI 线连上显示屏，同时给树莓派配上鼠标键盘，当作一台电脑来操作。不具备这些条件也没关系，我们可以通过 Terminal 用 SSH 连接进去。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>通过路由器查看树莓派的 IP 地址，一般在路由器上显示名称就是「Raspberry Pi」（建议在路由器上设置成静态 IP，绑定一下 mac 地址）。找到 IP 地址后，我们打开 Mac 上的 Terminal（Windows 下可以用 SSH CRT 或者 Putty），&lt;host&gt; 即树莓派的 IP，pi 是树莓派的默认用户名，初始密码是 raspberry</p><pre style='font-size: 16px;text-align: start;margin-top: 12px;margin-bottom: 12px;white-space: pre-wrap;font-stretch: normal;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;background-color: rgb(248, 248, 248);border: 1px solid rgb(232, 232, 232);color: rgb(68, 68, 68);padding: 6px 10px;word-wrap: break-word;cursor: text;max-width: 100%;overflow: auto;border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;caret-color: rgb(68, 68, 68);'><code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);'><span style="color: rgb(0, 122, 170);">ssh pi@&lt;host&gt;</span></code></pre><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.42280701754385963" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZfGdGJxtqbJxL5Q1VyaWDNJBlVCBX6jNZbyPwnibSGuT9NOhvNPJaVtA/640?wx_fmt=png" data-type="png" data-w="1140" src="https://cloud.huahuoding.com/images/2021/03/30/2021033039X703.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/></figure><h4 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(76, 193, 252);line-height: 1.4em;background-color: rgb(255, 255, 255);'><br/></h4><h4 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(76, 193, 252);line-height: 1.4em;background-color: rgb(255, 255, 255);'>安装 Docker 容器</h4><p><br/></p><h5 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(170, 170, 170);font-size: 0.83em;line-height: 1.4em;padding-bottom: 4px;border-bottom-width: 1px;border-bottom-style: solid;border-bottom-color: rgb(240, 240, 240);background-color: rgb(255, 255, 255);'><span style="font-size: 16px;color: rgb(136, 136, 136);">安装 Docker</span></h5><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>Docker 的安装比较简单，同样是几行命令就能搞定。</p><pre style='font-size: 16px;text-align: start;margin-top: 12px;margin-bottom: 12px;white-space: pre-wrap;font-stretch: normal;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;background-color: rgb(248, 248, 248);border: 1px solid rgb(232, 232, 232);color: rgb(68, 68, 68);padding: 6px 10px;word-wrap: break-word;cursor: text;max-width: 100%;overflow: auto;border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;caret-color: rgb(68, 68, 68);'><code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);'><span style="color: rgb(0, 122, 170);"># 下载安装脚本<br/>curl -fsSL https://get.docker.com -o get-docker.sh<br/><br/># 执行脚本（过程有点长）<br/>sudo sh get-docker.sh<br/><br/># 修改用户权限<br/>sudo groupadd docker<br/>sudo usermod -aG docker pi<br/><br/># 添加 Docker 服务到自启动<br/>sudo systemctl enable docker<br/>sudo systemctl start docker</span></code></pre><p style='margin-top: 12px;margin-bottom: 18px;font-size: 16px;white-space: normal;text-align: start;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><br/></p><h5 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(170, 170, 170);font-size: 0.83em;line-height: 1.4em;padding-bottom: 4px;border-bottom-width: 1px;border-bottom-style: solid;border-bottom-color: rgb(240, 240, 240);background-color: rgb(255, 255, 255);'><span style="color: rgb(136, 136, 136);font-size: 16px;">Hello World 测试一下<br/></span></h5><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>运行一个 Hello-World 测试容器试一下</p><pre style='font-size: 16px;text-align: start;margin-top: 12px;margin-bottom: 12px;white-space: pre-wrap;font-stretch: normal;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;background-color: rgb(248, 248, 248);border: 1px solid rgb(232, 232, 232);color: rgb(68, 68, 68);padding: 6px 10px;word-wrap: break-word;cursor: text;max-width: 100%;overflow: auto;border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;caret-color: rgb(68, 68, 68);'><code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);'><span style="color: rgb(0, 122, 170);">docker run hello-world</span></code></pre><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>看到以下提示说明安装测试通过（首次运行的时候会从远程下载镜像）</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.6684303350970018" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZ5NDviaHvLLQVmDQ08HtxkGHdM9W5uBXvBZSqABSglfBg8SaicWhaSBKg/640?wx_fmt=png" data-type="png" data-w="1134" src="https://cloud.huahuoding.com/images/2021/03/30/202103305oPVd2.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自截图</span></figcaption></figure><h5 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(170, 170, 170);font-size: 0.83em;line-height: 1.4em;padding-bottom: 4px;border-bottom-width: 1px;border-bottom-style: solid;border-bottom-color: rgb(240, 240, 240);background-color: rgb(255, 255, 255);'><span style="font-size: 16px;color: rgb(136, 136, 136);">安装可视化操作界面 Portainer </span></h5><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>Docker 安装完成后，可以通过命令行来管理，常见命令有 </p><pre style='font-size: 16px;text-align: start;margin-top: 12px;margin-bottom: 12px;white-space: pre-wrap;font-stretch: normal;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;background-color: rgb(248, 248, 248);border: 1px solid rgb(232, 232, 232);color: rgb(68, 68, 68);padding: 6px 10px;word-wrap: break-word;cursor: text;max-width: 100%;overflow: auto;border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;caret-color: rgb(68, 68, 68);'><code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);'><span style="color: rgb(0, 122, 170);"># 查看镜像<br/>docker image ls<br/><br/># 查看容器<br/>docker ps</span></code></pre><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>方便起见，我们安装一个图形化界面来操作容器 —— Portainer</p><pre style='font-size: 16px;text-align: start;margin-top: 12px;margin-bottom: 12px;white-space: pre-wrap;font-stretch: normal;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;background-color: rgb(248, 248, 248);border: 1px solid rgb(232, 232, 232);color: rgb(68, 68, 68);padding: 6px 10px;word-wrap: break-word;cursor: text;max-width: 100%;overflow: auto;border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;caret-color: rgb(68, 68, 68);'><code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);'><span style="color: rgb(0, 122, 170);"># 拉取 Portainer 最新的镜像<br/>docker pull portainer/portainer:latest<br/><br/># 启动容器<br/>docker run -d -p 9000:9000 --name portainer --restart=always -e TZ="Asia/Shanghai" -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer</span></code></pre><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>执行完成后，访问 <code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);border: 1px solid rgb(232, 232, 232);border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;'><span style="color: rgb(0, 122, 170);">http://&lt;host&gt;:9000</span></code> ，&lt;host&gt; 为树莓派的 IP，首次访问需要注册一个管理员账户。连接方式选择「Local」</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.6613885505481121" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZzrrxxibxIDybJ7O4cbvBNKdlNZYESqwA3Z8OI4ovrvfkDBPIwrjM6lQ/640?wx_fmt=png" data-type="png" data-w="1642" src="https://cloud.huahuoding.com/images/2021/03/30/202103304a023v.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网页截图</span></figcaption></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>登录成功后就可以查看和操作容器了，重启、删除、查看状态等等。</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.3351104341203351" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZLLP1ticVRCsaU6WicOaVbz24UWgMibuLpbUY9a2ehoIumJbw39zhBIshg/640?wx_fmt=png" data-type="png" data-w="2626" src="https://cloud.huahuoding.com/images/2021/03/30/20210330941pk9.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网页截图</span></figcaption></figure><h4 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(76, 193, 252);line-height: 1.4em;background-color: rgb(255, 255, 255);'><br/></h4><h4 style='text-align: start;white-space: normal;font-family: Lato-Bold, Lato-Regular, AvenirNext-DemiBold, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;color: rgb(76, 193, 252);line-height: 1.4em;background-color: rgb(255, 255, 255);'>安装 Home Assistant</h4><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><span style="color: rgb(61, 170, 214);">Home Assistant 官网 <sup style='text-align: start;white-space: normal;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;'>3</sup></span></p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>官网的 Installation 指导提供了多种介质的安装方式，我们是安装在树莓派的 Docker 中，Docker 是一种容器，所以选择「Raspberry Pi」中的「Home Assistant Container」的安装方式</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.3064066852367688" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZzxp8MW4A6MMnynxqicYtmxgsuZiczXozg5CZ1pJhnjv1SuYCb4vwTzcw/640?wx_fmt=png" data-type="png" data-w="1436" src="https://cloud.huahuoding.com/images/2021/03/30/20210330847P90.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网页截图</span></figcaption></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>打开的页面中滚动到「Install Home Assistant Container」位置</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="1.0845295055821371" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZjFxicxRDQXe94hxF6ccJchMn5gdyHpm2LibfialOuxhicFzJOEx61ibv9Sw/640?wx_fmt=png" data-type="png" data-w="1254" src="https://cloud.huahuoding.com/images/2021/03/30/20210330l8YXT7.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><span style="color: rgb(178, 178, 178);font-size: 0.75em;">       图片来自网页截图</span></figure><figure style='margin-top: 1em;margin-bottom: 1em;font-size: 16px;white-space: normal;text-align: start;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><p><br/></p></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>可以看到 Raspberry pi 3 的 Install 下就一行脚本，对，执行它就可以了，是不是很简单。其中 <code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);border: 1px solid rgb(232, 232, 232);border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;'><span style="color: rgb(0, 122, 170);">/PATH_TO_YOUR_CONFIG </span></code>是你准备存放 HA 配置文件的位置，建议新建一个文件夹，比如 <code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);border: 1px solid rgb(232, 232, 232);border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;'><span style="color: rgb(0, 122, 170);">/home/pi/ha</span></code> 之类的。那么，我们实际的安装脚本就是<br/></p><pre style='font-size: 16px;text-align: start;margin-top: 12px;margin-bottom: 12px;white-space: pre-wrap;font-stretch: normal;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;background-color: rgb(248, 248, 248);border: 1px solid rgb(232, 232, 232);color: rgb(68, 68, 68);padding: 6px 10px;word-wrap: break-word;cursor: text;max-width: 100%;overflow: auto;border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;caret-color: rgb(68, 68, 68);'><code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);'><span style="color: rgb(0, 122, 170);"># 创建配置文件的保存目录<br/>mkdir /home/pi/ha -p<br/><br/># 通过 Docker 运行 HA<br/>docker run --init -d \<br/>  --name homeassistant \<br/>  --restart=unless-stopped \<br/>  -v /etc/localtime:/etc/localtime:ro \<br/>  -v /home/pi/ha:/config \<br/>  --network=host \<br/>  homeassistant/raspberrypi3-homeassistant:stable</span></code></pre><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>这个安装过程会需要点时间，耐心等待，如果其中出现网络连接错误，重试即可。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>安装完成后，我们就可以通过浏览器访问 HA 了，<code style='font-stretch: normal;font-size: 0.95em;line-height: normal;font-family: "Bitstream Vera Sans Mono", "Courier New", monospace;color: rgb(76, 193, 252);border: 1px solid rgb(232, 232, 232);border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;'><span style="color: rgb(0, 122, 170);">http://&lt;host&gt;:8123</span></code>，host 是指树莓派的 IP 地址。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>首次打开 HA 页面，会要求注册，参考<span style="color: rgb(61, 170, 214);"> Onboarding Home Assistant<span style='font-size: 16px;text-align: start;caret-color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'> </span><sup style='text-align: start;white-space: normal;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;'>4 </sup></span>设置一个管理员账户即可。</p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>在设置区域和地图的时候，拖动地图选到自己家所在的位置，下拉选择一下时区，我选的是「Asia/Shanghai」。</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="1.8125" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZx9sWB4ibw8m620PJbfZicVjMrkhSiauj5JW4Qrc8uLz63xlN5dOmhiaeEA/640?wx_fmt=png" data-type="png" data-w="496" src="https://cloud.huahuoding.com/images/2021/03/30/2021033006u953.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>下一步是添加智能家居设备，可以先跳过，后续再添加。设置成功后，就可以看到我们的 HA 首页了。默认 UI 只有几张卡片，稍稍做了一些调整，让它看起来好看一点：</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.5536121673003802" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZC32raYkfHMBHqcfib14s8KfVGXIKaXdNFeSV08HHJ412Mf73zxojQyA/640?wx_fmt=png" data-type="png" data-w="2630" src="https://cloud.huahuoding.com/images/2021/03/30/20210330oc80Q5.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网页截图</span></figcaption></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>可别小看了这个 UI 界面，不仅仅是一个智能家居的控制中心，而且也是一个非常强大的展示中心，我找了几个例子，可以感受一下。</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.5489130434782609" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZicYo8DFoibG3cAdib7aMjZLxRvzBLw5icrfKOXzBecpzsW87NMJ1cu89Iw/640?wx_fmt=png" data-type="png" data-w="1656" src="https://cloud.huahuoding.com/images/2021/03/30/202103304ZZi6f.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网络，版权归原作者所有</span></figcaption></figure><figure style='font-size: 16px;text-align: left;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.6250602409638554" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZa91OiaowCa0xDaK35ibdOhDj9P0VHDaPbkA1xjFoKQ5f1WhFCseqckjg/640?wx_fmt=png" data-type="png" data-w="2075" src="https://cloud.huahuoding.com/images/2021/03/30/2021033061g388.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><span style="color: rgb(178, 178, 178);font-size: 0.75em;">        图片来自网络，版权归原作者所有</span></figure><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.7368941641938674" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZkAbBJPNvnA2A6WFpvnLITEtCP2XLsX6LIB5WrbGSFBeW9knPLVcAew/640?wx_fmt=png" data-type="png" data-w="1011" src="https://cloud.huahuoding.com/images/2021/03/30/20210330e2IfC9.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网络，版权归原作者所有</span></figcaption></figure><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.5028854080791426" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZlM0SVEialaovuOaVIicnQjTJ0sop6CDlkTmZ90OPAzCeg3WjzGEa7zlg/640?wx_fmt=png" data-type="png" data-w="2426" src="https://cloud.huahuoding.com/images/2021/03/30/202103309h4t17.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><figcaption style="font-size: 0.75em;padding: 0.5em 2em;margin-bottom: 2em;"><span style="color: rgb(178, 178, 178);">图片来自网络，版权归原作者所有</span></figcaption></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>也可以基于 HA 打造一个我们自己的「魔镜」，非常酷炫了。</p><figure style='font-size: 16px;text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><img data-ratio="0.714" data-src="https://mmbiz.qpic.cn/mmbiz_png/KFEEzuYoIv1evIrWlnvtFnjKKIgYtEbZg21PrUXWbAOObuLT1QiayF8dSsSH38jfJL6xylYAJkcVos0iafDV3HBQ/640?wx_fmt=png" data-type="png" data-w="500" src="https://cloud.huahuoding.com/images/2021/03/30/20210330ka4l71.png" style="width: 587.21875px;border-top-left-radius: 5px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;border-bottom-left-radius: 5px;display: block;"/><span style="color: rgb(178, 178, 178);font-size: 0.75em;">        图片来自网络，版权归原作者所有</span></figure><figure style='margin-top: 1em;margin-bottom: 1em;font-size: 16px;white-space: normal;text-align: start;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><p><br/></p></figure><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>至此，我们就完成了树莓派 + Docker + Home Assistant 的安装。步骤虽然有点繁多，但每一步其实都不复杂，新手小白也可以折腾起来。但真要实现我们理想中的智能家居终端，这还只是万里长征第一步 —— 搭好了环境。<br/></p><p style='font-size: 16px;text-align: start;white-space: normal;margin-top: 12px;margin-bottom: 18px;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'>慢慢来吧！</p><ol class="list-paddingleft-2" style='text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 0.8em;padding-left: 0.4em;font-size: 0.9em;padding-top: 1em;border-top-width: 1px;border-top-style: solid;border-top-color: rgb(234, 234, 234);counter-reset: footer-counter 0;list-style: none;caret-color: rgb(68, 68, 68);color: rgb(68, 68, 68);font-family: Lato-Regular, AvenirNext-Regular, -apple-system, "Helvetica Neue", Arial, Helvetica, sans-serif;background-color: rgb(255, 255, 255);'><li style="margin-bottom: 10px;margin-left: 16px;list-style: none;"><p>1. Balena Etcher 下载地址：<span style="color: rgb(61, 170, 214);">https://balena.io/etcher ↩︎</span></p></li><li style="margin-bottom: 10px;margin-left: 16px;list-style: none;"><p>2. 树莓派官网：<span style="color: rgb(61, 170, 214);">https://www.raspberrypi.org/software/operating-systems/ ↩︎</span></p></li><li style="margin-bottom: 10px;margin-left: 16px;list-style: none;"><p>3. Home Assistant 官网：<span style="color: rgb(61, 170, 214);">https://www.home-assistant.io/installation/ ↩︎</span></p></li><li style="margin-bottom: 10px;margin-left: 16px;list-style: none;"><p>4. 启动 Home Assistant：<span style="color: rgb(61, 170, 214);">https://www.home-assistant.io/getting-started/onboarding/ ↩︎</span></p></li></ol><section style="margin-bottom: 16px;padding: 8px;font-family: inherit;border-width: 1px;border-style: solid;border-color: rgb(226, 226, 226);box-shadow: rgb(226, 226, 226) 0px 16px 1px -13px;font-size: 1.5em;line-height: 1;text-decoration: inherit;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style='margin-bottom: 1em;width: 4em;height: 4em;float: left;border-top-left-radius: 50%;border-top-right-radius: 50%;border-bottom-right-radius: 50%;border-bottom-left-radius: 50%;background-image: url("https://cloud.huahuoding.com/images/2021/03/30/2021033076n8p2.jpeg");background-size: cover;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;background-position: 50% 50%;background-repeat: no-repeat no-repeat;'><br/></section><section style="text-align: right;float: right;display: inline;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="margin-right: 3px;display: inline-block;vertical-align: top;width: 1.2em;line-height: 1.2;font-size: 0.5em;font-family: inherit;text-decoration: inherit;color: rgb(120, 124, 129);max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">撒欢吧</section></section><section style="margin-right: 3px;display: inline-block;vertical-align: top;width: 1.2em;line-height: 1.2;font-size: 0.5em;font-family: inherit;text-decoration: inherit;color: rgb(120, 124, 129);max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">谈理想</section></section><section style="margin-right: 3px;display: inline-block;vertical-align: top;width: 1.2em;line-height: 1.2;font-size: 0.5em;font-family: inherit;text-decoration: inherit;color: rgb(120, 124, 129);max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">聊人生</section></section><section style="margin-right: 3px;display: inline-block;vertical-align: top;width: 1.2em;line-height: 1.2;font-size: 0.5em;font-family: inherit;text-decoration: inherit;color: rgb(120, 124, 129);max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">讲故事</section></section><section style="margin-right: 16px;display: inline-block;vertical-align: top;width: 1.1em;line-height: 1.2;font-size: 0.7em;font-family: inherit;text-decoration: inherit;color: rgb(255, 255, 255);border-color: rgb(249, 110, 87);background-color: rgb(95, 156, 239);max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">相对论</section></section><section style="display: inline-block;vertical-align: top;width: 1.2em;line-height: 1em;font-family: inherit;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">花火田丁</section></section></section><section style="clear: both;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="line-height: 1.6em;font-size: 0.5em;font-family: inherit;text-decoration: inherit;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">微信号：huahuoding</section></section><section style="line-height: 1.6em;font-size: 0.5em;font-family: inherit;text-decoration: inherit;color: rgb(120, 124, 129);max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">花火田丁</section></section><section style="line-height: 1.6em;font-size: 0.5em;font-family: inherit;text-decoration: inherit;color: rgb(120, 124, 129);max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">不折腾不人生</section></section></section></section></section></section></section></section>
</div>
<script nonce="1608897348" type="text/javascript">
                    var first_sceen__time = (+new Date());

                    if ("" == 1 && document.getElementById('js_content')) {
                        document.getElementById('js_content').addEventListener("selectstart",function(e){ e.preventDefault(); });
                    }

                    
                    
                </script>
<div id="js_sponsor_ad_area"></div>
<div class="read-more__area" id="js_more_read_area" style="display:none;">
</div>
<div class="reward_area tc reward_area_primary reward_area_carry_whisper" id="js_reward_area" style="display:none;">
<div class="reward-avatar" id="js_reward_avatar" style="display: none;">
<img aria-labelledby="js_reward_author" id="js_reward_author_head" role="link" src="" title="作者"/>
</div>
<div aria-hidden="true" class="reward-author" id="js_reward_author" style="display: none;">花火田丁</div>
<p class="reward_tips js_reward_wording" role="option">艺术源于生活</p>
<p class="reward_button_wrp">
<span class="reward_pop_panel" id="js_author_reward_qrcode">
<img alt="赞赏二维码" id="js_author_reward_qrcode_img" src=""/>
<strong>微信扫一扫赞赏作者</strong>
</span>
<a class="reward_button weui-btn js_wx_tap_highlight" href="##" id="js_reward_link" role="button"><i class="icon_reward"></i><span id="js_reward_link_text">赞赏</span></a>
</p>
<div class="reward_whisper_wrp" id="js_reward_whisper" style="display: none;">
<div class="reward_whisper_word">已喜欢，<a class="reward_whisper_link" href="javascript:;" id="js_show_whisper_dialog">对作者说句悄悄话</a></div>
</div>
<div id="js_reward_whisper_dialog" style="display: none;">
<div class="like_comment_primary_wrp editing">
<div class="like_comment_primary_inner">
<div class="like_comment_primary_hd">
<div class="like_comment_primary_hd_side">
<button class="like_comment_primary_cancel" id="js_hide_whisper_dialog">
            取消<i class="weui-icon-close-thin"></i>
</button>
</div>
<h4 class="like_comment_primary_title">发送给作者</h4>
<div class="like_comment_primary_hd_side">
<button class="like_comment_primary_btn" disabled="disabled" id="js_whisper_send">发送</button>
</div>
</div>
<div class="like_comment_primary_bd">
<textarea class="like_comment_textarea weui-textarea" id="js_whisper_text" placeholder="说句悄悄话"></textarea>
</div>
<span class="like_comment_msg" id="js_whisper_msg" style="visibility: hidden;">最多40字，当前共<span id="js_whisper_current_cnt"></span>字</span>
</div>
</div>
<div class="like_comment_primary_mask" id="js_whisper_dialog_mask"></div>
</div>
<div class="reward_area_inner" id="js_reward_inner" style="display:none;">
<p class="weui-loadmore weui-loadmore_line reward_user_tips weui-loadmore_default" id="js_reward_total_parent">
<span class="weui-loadmore__tips">
<a aria-labelledby="js_reward_total js_reward_total_text" class="js_wx_tap_highlight wx_tap_link" href="javascript:;" id="js_reward_total"></a> <span aria-hidden="true" id="js_reward_total_text">人赞赏</span>
</span>
</p>
<div aria-hidden="true" class="reward_user_list" id="js_reward_list"></div>
<div aria-hidden="true" class="simple_pagination" id="js_reward_pagination" style="display: none;">
<button class="btn_sp_prev js_reward_pagination_prev" disabled="">上一页</button>
<span class="sp_page_num_area">
<a class="sp_page_current js_reward_pagination_curpage" href="javascript:;">1</a>/<span class="sp_page_num js_reward_pagination_totalpage">3</span>
</span>
<button class="btn_sp_next js_reward_pagination_next">下一页</button>
</div>
</div>
</div>
<div class="reward_qrcode_area reward_area tc" id="js_reward_qrcode" style="display:none;">
<p aria-hidden="true" class="tips_global" id="js_a11y_reward_qr_title">长按二维码向我转账</p>
<p aria-describedby="js_a11y_reward_qr_tips " aria-labelledby="js_a11y_reward_qr_word js_a11y_comma js_a11y_reward_qr_title js_a11y_reward_qr_money" class="reward_tips" id="js_a11y_reward_qr_word" role="option">艺术源于生活</p>
<span class="reward_qrcode_img_wrp"><img alt="赞赏二维码" class="reward_qrcode_img" id="js_reward_qrcode_img"/></span>
<p aria-hidden="true" class="tips_global" id="js_a11y_reward_qr_tips">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
</div>
</div>